# ============================================
# GREENCHAINZ AZURE PRODUCTION CONFIGURATION
# ============================================
# Copy this to .env and fill in your actual values

# ============================================
# Core Application Settings
# ============================================
NODE_ENV=production
PORT=3001

# Frontend URL (your Container App or custom domain)
FRONTEND_URL=https://greenchainz-container.eastus.azurecontainerapps.io

# ============================================
# Azure Container Apps Environment
# ============================================
AZURE_CONTAINER_ENVIRONMENT=cae-greenchainz-env
AZURE_RESOURCE_GROUP=rg-greenchainz-prod-container
AZURE_LOCATION=eastus

# ============================================
# Azure Container Registry
# ============================================
ACR_NAME=acrgreenchainzprod916
ACR_LOGIN_SERVER=acrgreenchainzprod916.azurecr.io
ACR_USERNAME=acrgreenchainzprod916
ACR_PASSWORD=your-acr-password

# ============================================
# Azure Cache for Redis
# ============================================
REDIS_HOST=greenchainz.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=your-redis-primary-key
REDIS_SSL=true

# ============================================
# Azure Application Insights
# ============================================
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-key;IngestionEndpoint=https://eastus-8.in.applicationinsights.azure.com/
APPINSIGHTS_INSTRUMENTATIONKEY=your-instrumentation-key

# ============================================
# Azure Key Vault
# ============================================
AZURE_KEY_VAULT_NAME=greenchianz-vault
AZURE_KEY_VAULT_URL=https://greenchianz-vault.vault.azure.net/

# ============================================
# Azure Managed Identity (Recommended for production)
# ============================================
# When running in Azure Container Apps, use Managed Identity
AZURE_USE_MANAGED_IDENTITY=true
# If using Service Principal instead:
# AZURE_CLIENT_ID=your-client-id
# AZURE_CLIENT_SECRET=your-client-secret
# AZURE_TENANT_ID=your-tenant-id

# ============================================
# Azure Storage (revitfiles storage account)
# ============================================
AZURE_STORAGE_ACCOUNT_NAME=revitfiles
AZURE_STORAGE_CONNECTION_STRING=your-storage-connection-string
AZURE_STORAGE_CONTAINER_NAME=greenchainz-uploads

# ============================================
# Azure AI Document Intelligence
# ============================================
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=https://greenchainz-content-intel.cognitiveservices.azure.com/
AZURE_DOCUMENT_INTELLIGENCE_KEY=your-document-intelligence-key

# ============================================
# Azure AI Foundry / OpenAI Service
# ============================================
AZURE_OPENAI_ENDPOINT=https://greenchainz-foundry.openai.azure.com/
AZURE_OPENAI_API_KEY=your-openai-api-key
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o

# ============================================
# Azure API Management
# ============================================
AZURE_APIM_GATEWAY_URL=https://greenchainz-scraper-apim.azure-api.net
AZURE_APIM_SUBSCRIPTION_KEY=your-apim-subscription-key

# ============================================
# PostgreSQL Database (Azure Database for PostgreSQL)
# ============================================
# Recommended: a single connection string (Azure typically requires SSL).
# DATABASE_URL=postgresql://<user>:<password>@<server>.postgres.database.azure.com:5432/<db>?sslmode=require
DATABASE_URL=

# Or (fallback) individual variables:
POSTGRES_HOST=your-postgres-host.postgres.database.azure.com
POSTGRES_PORT=5432
DB_USER=your-db-user
DB_PASSWORD=your-db-password
DB_NAME=greenchainz_prod
POSTGRES_SSL=true

# Connection Pool Settings (Production)
PGPOOL_MAX=50
PGPOOL_MIN=5
PGPOOL_IDLE=30000
PGPOOL_CONNECTION_TIMEOUT=10000
PGPOOL_STATEMENT_TIMEOUT=60000

## Supabase removed: Azure-only stack

# ============================================
# JWT & Session Security
# ============================================
JWT_SECRET=your-super-secure-jwt-secret-min-32-chars
SESSION_SECRET=your-super-secure-session-secret-min-32-chars

# ============================================
# Email Configuration (Azure Communication Services or SMTP)
# ============================================
# Option 1: Azure Communication Services
AZURE_COMMUNICATION_CONNECTION_STRING=your-azure-comm-connection-string

# Option 2: SMTP (Gmail, SendGrid, etc.)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
FROM_EMAIL=no-reply@greenchainz.com

# Admin notifications
ADMIN_EMAIL=admin@greenchainz.com
NOTIFICATIONS_ENABLED=true

# ============================================
# OAuth 2.0 Providers (Production URLs)
# ============================================
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=https://greenchainz-container.eastus.azurecontainerapps.io/auth/google/callback

GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=https://greenchainz-container.eastus.azurecontainerapps.io/auth/github/callback

LINKEDIN_CLIENT_ID=your-linkedin-client-id
LINKEDIN_CLIENT_SECRET=your-linkedin-client-secret
LINKEDIN_CALLBACK_URL=https://greenchainz-container.eastus.azurecontainerapps.io/auth/linkedin/callback

MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALLBACK_URL=https://greenchainz-container.eastus.azurecontainerapps.io/auth/microsoft/callback

# ============================================
# Feature Flags
# ============================================
FEATURE_AI_DOCUMENT_ANALYSIS=true
FEATURE_REDIS_CACHING=true
FEATURE_AZURE_MONITORING=true
