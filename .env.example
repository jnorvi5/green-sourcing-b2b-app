# ============================================
# GREENCHAINZ ENVIRONMENT CONFIGURATION
# ============================================
#
# This file documents all environment variables used by the application.
# Copy this to .env and fill in your values.
#
# CLASSIFICATION:
#   游댮 SECRET - Never commit! Use Azure Key Vault in production
#   游리 SERVER - Environment-specific config (URLs, hosts)
#   游릭 PUBLIC - Safe to commit, feature flags and tuning
#
# See docs/AZURE_SECRETS_AND_CONFIG.md for complete setup guide.
#
# ============================================

# ============================================
# CORE SETTINGS 游릭
# ============================================

NODE_ENV=development
PORT=3001
LOG_LEVEL=debug
DEBUG=greenchainz:*

# Authentication debugging (logs detailed auth flow info)
AUTH_DEBUG=false

# ============================================
# FRONTEND URL (Required) 游리
# Used for CORS configuration and OAuth redirects
# ============================================

FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:3001

# ============================================
# SECURITY SECRETS (Required) 游댮
# ============================================
# PRODUCTION: Store these in Azure Key Vault!
# These MUST be at least 32 characters in production.
# Generate with: openssl rand -base64 48

# JWT signing key for auth tokens
JWT_SECRET=dev-jwt-secret-min-32-chars-replace-in-prod

# Express session signing key
SESSION_SECRET=dev-session-secret-32-chars-replace-in-prod

# Cookie encryption key for signed cookies
COOKIE_SECRET=dev-cookie-secret-32-chars-replace-in-prod

# Cookie domain (leave empty for localhost)
COOKIE_DOMAIN=

# ============================================
# POSTGRESQL DATABASE 游댮游리
# ============================================
# Option 1: Full connection string (recommended for Azure)
# DATABASE_URL=postgresql://user:password@host:5432/dbname?sslmode=require

# Option 2: Individual variables
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DB_USER=postgres
DB_PASSWORD=your-database-password
DB_NAME=greenchainz_dev
POSTGRES_SSL=false

# Connection pool settings 游릭
PGPOOL_MAX=20
PGPOOL_MIN=2
PGPOOL_IDLE=30000
PGPOOL_CONNECTION_TIMEOUT=5000
PGPOOL_STATEMENT_TIMEOUT=30000

# ============================================
# AZURE AD AUTHENTICATION 游댮游리
# ============================================
# See docs/OAUTH_SETUP.md for Azure AD configuration
# Required for the /api/auth/callback route (Microsoft Entra ID OAuth)

# Azure AD tenant ID (your-tenant.onmicrosoft.com or GUID)
AZURE_TENANT_ID=
AZURE_AD_TENANT_ID=

# Azure AD application (client) ID
AZURE_CLIENT_ID=
AZURE_AD_CLIENT_ID=

# Azure AD client secret 游댮 SECRET
AZURE_CLIENT_SECRET=
AZURE_AD_CLIENT_SECRET=

# ============================================
# AZURE KEY VAULT 游리
# ============================================
# Required for production secrets management

AZURE_KEY_VAULT_URL=
AZURE_USE_MANAGED_IDENTITY=false

# ============================================
# AZURE REDIS CACHE 游댮游리
# ============================================
# Required for production sessions and caching

REDIS_HOST=
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_SSL=true

# Alternative: Full connection string
# AZURE_REDIS_CONNECTION_STRING=rediss://:password@host:6380

# ============================================
# AZURE BLOB STORAGE 游댮游리
# ============================================

AZURE_STORAGE_ACCOUNT_NAME=
AZURE_STORAGE_CONTAINER_NAME=greenchainz-uploads
# Either connection string OR managed identity (not both)
AZURE_STORAGE_CONNECTION_STRING=

# ============================================
# AZURE STORAGE QUEUE (for greenchainz-intelligence bridge) 游댮游리
# ============================================
# Used to dispatch heavy processing tasks (scrapers, data sync, AI agents)
# to the separate greenchainz-intelligence Azure Functions app.
# This prevents build timeouts and memory issues in the main Next.js app.

AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=youraccountname;AccountKey=yourkey;EndpointSuffix=core.windows.net

# ============================================
# AZURE AI SERVICES 游댮游리
# ============================================

# Document Intelligence (Form Recognizer)
AZURE_DOCUMENT_INTELLIGENCE_ENDPOINT=
AZURE_DOCUMENT_INTELLIGENCE_KEY=

# Azure OpenAI
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_KEY=
AZURE_OPENAI_API_VERSION=2024-10-21
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o

# Azure AI Foundry (Agent Gateway) 游댮
AZURE_AI_FOUNDRY_ENDPOINT=
AZURE_AI_FOUNDRY_KEY=
AZURE_AI_FOUNDRY_DEPLOYMENT_NAME=

# Azure AI Search (Required for Web Scraping Agent)
AZURE_SEARCH_ENDPOINT=
AZURE_SEARCH_KEY=
AZURE_SEARCH_INDEX_NAME=supplier-websites

# ============================================
# AZURE MONITORING 游댮游리
# ============================================

# Application Insights (contains instrumentation key)
APPLICATIONINSIGHTS_CONNECTION_STRING=

# Azure Maps (Required for Geocoding)
AZURE_MAPS_KEY=

# ============================================
# EMAIL / NOTIFICATIONS 游댮游리
# ============================================

NOTIFICATIONS_ENABLED=false

# Zoho Mail Configuration (for contact form)
ZOHO_EMAIL=noreply@greenchainz.com
ZOHO_PASSWORD=your-zoho-app-password

# SMTP Configuration (alternative naming for compatibility)
SMTP_HOST=smtp.zoho.com
SMTP_PORT=465
SMTP_USER=noreply@greenchainz.com
SMTP_PASS=your-zoho-app-password
SMTP_FROM_EMAIL=noreply@greenchainz.com
SMTP_FROM_NAME=GreenChainz

# Admin email for alerts and contact form
ADMIN_EMAIL=founder@greenchainz.com

# ============================================
# FEATURE FLAGS 游릭
# ============================================

FEATURE_AZURE_MONITORING=false
FEATURE_REDIS_CACHING=false
FEATURE_AI_DOCUMENT_ANALYSIS=false
FEATURE_LINKEDIN_VERIFICATION=false

# ============================================
# OAUTH PROVIDERS (Optional) 游댮
# ============================================
# Only configure providers you want to use

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3001/auth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_CALLBACK_URL=http://localhost:3001/auth/github/callback

# LinkedIn OAuth (Required for buyer verification) 游댮
LINKEDIN_CLIENT_ID=
LINKEDIN_CLIENT_SECRET=
LINKEDIN_CALLBACK_URL=http://localhost:3001/auth/linkedin/callback
LINKEDIN_REDIRECT_URI=http://localhost:3000/api/v1/auth/linkedin/callback
LINKEDIN_REDIRECT_URI=http://localhost:3001/auth/linkedin/callback

# Microsoft OAuth (separate from Azure AD)
MICROSOFT_CLIENT_ID=
MICROSOFT_CLIENT_SECRET=
MICROSOFT_CALLBACK_URL=http://localhost:3001/auth/microsoft/callback

# Facebook OAuth
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=
FACEBOOK_CALLBACK_URL=http://localhost:3001/auth/facebook/callback

# ============================================
# EXTERNAL INTEGRATIONS (Optional) 游댮
# ============================================

# Autodesk Forge/APS
AUTODESK_CLIENT_ID=
AUTODESK_CLIENT_SECRET=

# FSC Certificate Database
FSC_API_KEY=
FSC_API_URL=https://fsc-api-endpoint.com

# Supabase (if using)
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=

# ============================================
# STRIPE PAYMENTS (Required for RFQ deposits) 游댮
# ============================================

STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# RFQ Deposit Configuration 游릭
STRIPE_RFQ_DEPOSIT_AMOUNT_CENTS=2500
STRIPE_RFQ_DEPOSIT_CURRENCY=usd

# RFQ deposit amount in cents (default: $25.00)
STRIPE_RFQ_DEPOSIT_AMOUNT_CENTS=2500

# ============================================
# INTERNAL API PROTECTION 游댮
# ============================================
# Optional: Protects internal endpoints like RFQ simulator

INTERNAL_API_KEY=
