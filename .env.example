# Supabase (Vite frontend)
VITE_SUPABASE_URL=your-supabase-url
VITE_SUPABASE_ANON_KEY=your-supabase-anon-key

# Supabase (Next.js App Router)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Backend server
PORT=3001

# PostgreSQL connection
# For local development (non-Docker): use localhost
# For Docker Compose: use db as host
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database credentials (update these!)
DB_USER=user
DB_PASSWORD=password
DB_NAME=greenchainz_dev

# Legacy variable names (for backward compatibility)
POSTGRES_USER=${DB_USER}
POSTGRES_PASSWORD=${DB_PASSWORD}
POSTGRES_DB=${DB_NAME}

# PostgreSQL Connection Pool Configuration (Performance Tuning)
# These settings optimize database connection handling for better performance
# Adjust based on your deployment size and expected concurrent users

# Maximum number of clients in the pool (default: 20)
# Small deployment (< 100 users): 20
# Medium deployment (100-500 users): 50
# Large deployment (> 500 users): 100
PGPOOL_MAX=20

# Minimum number of idle connections to maintain (default: 2)
# Keeping a minimum ensures faster response times for subsequent requests
PGPOOL_MIN=2

# Milliseconds a client must sit idle before being released (default: 30000)
# Lower values free up connections faster but may cause more reconnection overhead
PGPOOL_IDLE=30000

# Milliseconds to wait for a connection to become available (default: 5000)
# Increase if you see connection timeout errors under high load
PGPOOL_CONNECTION_TIMEOUT=5000

# Milliseconds to wait for a query to complete (default: 30000)
# Prevents runaway queries from blocking the pool
# Set to 0 to disable (not recommended in production)
PGPOOL_STATEMENT_TIMEOUT=30000

# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
NOTIFICATIONS_ENABLED=false

# Default sender
FROM_EMAIL=no-reply@greenchainz.local

# Session Secret (for OAuth with Passport.js)
SESSION_SECRET=your-session-secret-change-in-production-min-32-chars

# ============================================
# Email Configuration (Phase 1 MVP - FREE)
# ============================================
# NO TWILIO OR ZOHO NEEDED YET!
# Use free Gmail SMTP for transactional emails
# Setup: https://support.google.com/accounts/answer/185833 (App Passwords)

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password-here

# Admin notifications (get alerts for new leads)
ADMIN_EMAIL=your-admin-email@gmail.com

# Alternative SMTP Providers (if not using Gmail):
# - Outlook: smtp-mail.outlook.com:587
# - SendGrid: smtp.sendgrid.net:587 (100 emails/day free)
# - Mailgun: smtp.mailgun.org:587 (first 5000/month free)

# ============================================
# OAuth 2.0 Social Login Providers
# ============================================

# Google OAuth 2.0
# Setup: https://console.cloud.google.com/apis/credentials
# 1. Create OAuth 2.0 Client ID
# 2. Add authorized redirect URI: http://localhost:3001/auth/google/callback
# 3. Enable Google+ API
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3001/auth/google/callback

# GitHub OAuth
# Setup: https://github.com/settings/developers
# 1. Register a new OAuth application
# 2. Set callback URL: http://localhost:3001/auth/github/callback
# 3. Request user:email scope
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=http://localhost:3001/auth/github/callback

# LinkedIn OAuth 2.0
# Setup: https://www.linkedin.com/developers/apps
# 1. Create new app
# 2. Add "Sign In with LinkedIn" product
# 3. Add redirect URL: http://localhost:3001/auth/linkedin/callback
# 4. Request openid, profile, and email scopes
LINKEDIN_CLIENT_ID=your-linkedin-client-id
LINKEDIN_CLIENT_SECRET=your-linkedin-client-secret
LINKEDIN_CALLBACK_URL=http://localhost:3001/auth/linkedin/callback

# Microsoft OAuth 2.0
# Setup: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationsListBlade
# 1. Register new application
# 2. Add redirect URI: http://localhost:3001/auth/microsoft/callback
# 3. Generate client secret in Certificates & secrets
# 4. API permissions: User.Read
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_CALLBACK_URL=http://localhost:3001/auth/microsoft/callback

# ============================================
# Survey Form URLs
# ============================================
# Google Forms or other survey platform URLs
SUPPLIER_FORM_URL=https://docs.google.com/forms/d/e/YOUR_SUPPLIER_FORM_ID/viewform
BUYER_FORM_URL=https://docs.google.com/forms/d/e/YOUR_BUYER_FORM_ID/viewform
DATA_PROVIDER_FORM_URL=https://docs.google.com/forms/d/e/YOUR_DATA_PROVIDER_FORM_ID/viewform

# Frontend URL (for OAuth redirects after successful authentication)
FRONTEND_URL=http://localhost:5173

# ============================================
# Optional: Email Configuration (SMTP)
# ============================================
# For sending transactional emails (future feature)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password

# ============================================
# AWS S3 Configuration (Assets Vault)
# ============================================
# Setup: https://console.aws.amazon.com/s3
# 1. Create S3 bucket (e.g., greenchainz-assets)
# 2. Create IAM user with S3 permissions
# 3. Generate access keys
# 4. Configure bucket CORS if needed
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=us-east-1
AWS_BUCKET_NAME=greenchainz-assets
# Legacy alias for bucket name
S3_BUCKET_NAME=greenchainz-assets

# ============================================
# AWS Production Infrastructure
# ============================================
# S3 Buckets (production)
AWS_IMAGES_BUCKET=gc-product-images-prod
AWS_EPD_BUCKET=gc-epd-documents-prod
AWS_BACKUP_BUCKET=gc-data-backups-prod

# CloudFront CDN
AWS_CLOUDFRONT_DISTRIBUTION_ID=your-distribution-id
AWS_CLOUDFRONT_DOMAIN=cdn.greenchainz.com

# AWS SES (Transactional Email)
AWS_SES_REGION=us-east-1
AWS_SES_FROM_EMAIL=noreply@greenchainz.com
AWS_SES_CONFIGURATION_SET=gc-transactional

# ============================================
# Data Provider API Keys (for Lambda functions)
# ============================================
# EC3 (Building Transparency) - Embodied Carbon Data
# Get your API key from: https://buildingtransparency.org
EC3_API_KEY=your-ec3-bearer-token

# EPD International - Environmental Product Declarations
# Get your API key from: https://www.environdec.com/
EPD_INTERNATIONAL_API_KEY=your-epd-api-key

# ============================================
# Supabase Backup Configuration
# ============================================
# For automated database backups via Lambda
# Get access token: Supabase Dashboard > Settings > Access Tokens
SUPABASE_ACCESS_TOKEN=your-supabase-access-token
# Get project ref from dashboard URL (e.g., abcd1234.supabase.co)
SUPABASE_PROJECT_REF=your-project-ref

# ============================================
# MongoDB Atlas Configuration
# ============================================
# Setup: https://cloud.mongodb.com/
# 1. Create a cluster
# 2. Create database user with password
# 3. Whitelist your IP or use 0.0.0.0/0 for serverless
# 4. Get connection string from "Connect" button
MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/greenchainz?retryWrites=true&w=majority

# ============================================
# Optional: Data Provider API Keys (Phase 1)
# ============================================
# For sustainability data integration
# EC3_API_KEY=your-ec3-api-key
# FSC_API_KEY=your-fsc-api-key
# BCORP_API_KEY=your-bcorp-api-key

# ============================================
# Supabase Configuration (duplicate for reference)
# ============================================
# VITE_SUPABASE_URL=your-supabase-url
# VITE_SUPABASE_ANON_KEY=your-supabase-anon-key

# ============================================
# Intercom Configuration (for future integration)
# ============================================
# Setup: https://app.intercom.com/
NEXT_PUBLIC_INTERCOM_APP_ID=your-app-id

# ============================================
# Azure AI Foundry (Outreach Email Generation)
# ============================================
# Setup: https://ai.azure.com/
# 1. Create Azure OpenAI resource
# 2. Deploy GPT-4o-mini model with name "emailer"
# 3. Get endpoint and API key from resource
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_KEY=your-api-key
AZURE_OPENAI_DEPLOYMENT_NAME=emailer

# ============================================
# Zoho Mail Configuration (Transactional Emails)
# ============================================
# For SMTP-based sending:
# Setup: https://www.zoho.com/mail/
# 1. Create Zoho Mail account
# 2. Generate app-specific password
# 3. Enable SMTP in mail settings
ZOHO_SMTP_HOST=smtp.zoho.com
ZOHO_SMTP_PORT=587
ZOHO_SMTP_USER=noreply@greenchainz.com
ZOHO_SMTP_PASS=your-app-password
ZOHO_FROM_EMAIL=noreply@greenchainz.com
ZOHO_FROM_NAME=GreenChainz

# For OAuth2 API-based sending (optional, preferred for production):
# Setup: https://api-console.zoho.com/
# 1. Create a self-client
# 2. Generate refresh token with ZohoMail.messages.CREATE scope
ZOHO_CLIENT_ID=your-zoho-client-id
ZOHO_CLIENT_SECRET=your-zoho-client-secret
ZOHO_REFRESH_TOKEN=your-zoho-refresh-token
ZOHO_ACCOUNT_ID=your-zoho-account-id

# ============================================
# MailerLite Configuration (Marketing Emails)
# ============================================
# Setup: https://dashboard.mailerlite.com/integrations/api
# 1. Create API token in MailerLite dashboard
# 2. Configure domain authentication in MailerLite
MAILERLITE_API_KEY=your-mailerlite-api-key
MAILERLITE_FROM_EMAIL=newsletter@greenchainz.com
MAILERLITE_FROM_NAME=GreenChainz

# MailerLite Group IDs (create these groups in MailerLite dashboard)
# Get IDs from MailerLite API or dashboard URL
MAILERLITE_GROUP_ARCHITECTS_ACTIVE=your-group-id
MAILERLITE_GROUP_ARCHITECTS_INACTIVE=your-group-id
MAILERLITE_GROUP_ARCHITECTS_TRIAL=your-group-id
MAILERLITE_GROUP_SUPPLIERS_VERIFIED=your-group-id
MAILERLITE_GROUP_SUPPLIERS_PENDING=your-group-id
MAILERLITE_GROUP_SUPPLIERS_REJECTED=your-group-id
MAILERLITE_GROUP_ADMINS=your-group-id
MAILERLITE_GROUP_NEWSLETTER_WEEKLY=your-group-id
MAILERLITE_GROUP_NEWSLETTER_MONTHLY=your-group-id

# MailerLite Automation IDs (optional, for onboarding sequences)
MAILERLITE_AUTOMATION_BUYER_ONBOARDING=your-automation-id
MAILERLITE_AUTOMATION_SUPPLIER_ONBOARDING=your-automation-id

# ============================================
# Resend Configuration (Transactional Emails)
# ============================================
# Setup: https://resend.com/
# 1. Create Resend account
# 2. Generate API key from dashboard
# 3. Verify your domain for production use
RESEND_API_KEY=your-resend-api-key
RESEND_FROM_EMAIL=noreply@greenchainz.com

# ============================================
# Supabase Service Role Key (for email logging)
# ============================================
# Required for server-side email logging
# Get from: Supabase Dashboard > Settings > API > service_role key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================
# Cron Job Security
# ============================================
# Secret for authenticating cron job requests
CRON_SECRET=your-random-cron-secret

# ============================================
# Autodesk Platform Services (APS) Integration
# ============================================
# Setup: https://aps.autodesk.com/
# 1. Create an APS application
# 2. Get Client ID and Client Secret
# 3. Add OAuth callback URL: http://localhost:3001/api/autodesk/callback (dev)
#    or https://greenchainz.com/api/autodesk/callback (production)
# 4. Enable scopes: data:read, data:write, data:create, viewables:read
AUTODESK_CLIENT_ID=your-autodesk-client-id
AUTODESK_CLIENT_SECRET=your-autodesk-client-secret
AUTODESK_CALLBACK_URL=http://localhost:3001/api/autodesk/callback

# ============================================
# Stripe Subscription Billing
# ============================================
# Setup: https://stripe.com/
# 1. Create Stripe account
# 2. Get API keys from Dashboard → Developers → API keys
# 3. Create products in Dashboard → Products
# 4. Get price IDs for each tier
# 5. Set up webhook endpoint: /api/stripe/webhook
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_signing_secret
STRIPE_PRICE_STANDARD=price_standard_monthly_id
STRIPE_PRICE_VERIFIED=price_verified_monthly_id

# Base URL for redirects
NEXT_PUBLIC_BASE_URL=http://localhost:3001

# ============================================
# Outreach System Settings
# ============================================
# Follow-up automation configuration
OUTREACH_AUTO_FOLLOW_UP_DAYS=5
OUTREACH_MAX_FOLLOW_UPS=3
