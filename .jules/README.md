# Jules Local Development Setup

This directory contains scripts and configuration for running GreenChainz locally with Jules (Google's AI agent).

## Quick Start

### 1. Copy Secrets Template

```bash
cp .jules/secrets.example.json .jules/secrets.json
```

### 2. Edit Secrets

The secrets are already populated with your Supabase keys. If you need to update them:

```bash
nano .jules/secrets.json
```

### 3. Run Setup Script

```bash
bash .jules/setup.sh
```

This will:
- Load secrets from `.jules/secrets.json`
- Create `.env.local` for IDE support
- Start the dev server on `http://localhost:3000`

## What the Setup Script Does

1. **Loads Secrets**: Reads `.jules/secrets.json` and exports them as environment variables
2. **Sets Environment**: Configures Node.js/Next.js to use those variables
3. **Creates .env.local**: Creates a placeholder `.env.local` file for IDE autocompletion
4. **Starts Dev Server**: Runs `npm run dev` with all secrets loaded

## Secrets in `.jules/secrets.json`

```json
{
  "NEXT_PUBLIC_SUPABASE_URL": "your-supabase-url",
  "NEXT_PUBLIC_SUPABASE_ANON_KEY": "your-anon-key",
  "SUPABASE_SERVICE_ROLE_KEY": "your-service-role-key",
  "NEXT_PUBLIC_BASE_URL": "http://localhost:3000",
  "JWT_SECRET": "your-jwt-secret",
  "SESSION_SECRET": "your-session-secret"
}
```

**Security Note**: `secrets.json` is in `.gitignore` and never committed. It only exists locally in your Jules environment.

## Development Workflow

### First Time Setup

```bash
# Clone repo
git clone https://github.com/jnorvi5/green-sourcing-b2b-app
cd green-sourcing-b2b-app

# Copy secrets template
cp .jules/secrets.example.json .jules/secrets.json

# Run setup (loads secrets and starts dev server)
bash .jules/setup.sh
```

### Subsequent Runs

```bash
# Just run the setup script again
bash .jules/setup.sh
```

## Troubleshooting

### "Missing Supabase environment variables"

If you see this error:

1. Check `.jules/secrets.json` exists:
   ```bash
   ls -la .jules/secrets.json
   ```

2. Verify it has valid JSON:
   ```bash
   node -e "console.log(JSON.parse(require('fs').readFileSync('./.jules/secrets.json', 'utf8')))"
   ```

3. If broken, copy from template again:
   ```bash
   cp .jules/secrets.example.json .jules/secrets.json
   ```

### Port 3000 Already in Use

```bash
# Use a different port
PORT=3001 npm run dev
```

### Jules Not Running?

Make sure you're in the Jules environment:

```bash
# Check if node/npm are available
node --version
npm --version

# If not, you may need to be in a Jules coding session
```

## Vercel Deployment

When you push to GitHub, Vercel automatically:
1. Clones the repo
2. Loads environment variables from Vercel dashboard
3. Builds and deploys

**No secrets in git** - Environment variables are loaded from Vercel's secure storage.

## Files

- `.jules/setup.sh` - Main setup script (loads secrets and starts dev server)
- `.jules/secrets.json` - **LOCAL ONLY** - Your actual secret keys (in .gitignore)
- `.jules/secrets.example.json` - Template for secrets (safe to commit)
- `.env.local` - Generated by setup script (in .gitignore)

## Next Steps

1. Run setup: `bash .jules/setup.sh`
2. Open http://localhost:3000 in browser
3. See the marketing site and catalog pages
4. Build out the missing features (data scraping, architect dashboard, etc.)

---

**Questions?** Check the main README.md in the repo root.
